(this["webpackJsonpqr-code-reader"]=this["webpackJsonpqr-code-reader"]||[]).push([[0],{151:function(e,t,a){e.exports=a(267)},156:function(e,t,a){},267:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(42),c=a.n(o),s=(a(156),a(45)),i=a(300),l=a(289),u=a(290),d=a(291),f=function(){return r.a.createElement(l.a,{position:"static"},r.a.createElement(u.a,null,r.a.createElement(d.a,{variant:"h6"},"Leitor de QR Codes")))},m=a(293),p=a(292),g=Object(n.createContext)(),h=a(12),v=a.n(h),b=a(144),w=a(40),E=a(20),k=a(301),x=function(e){var t,a,n,r=[];for(t=0,a=e.length;t<a;t+=10)n=e.slice(t,t+10),r.push(n);return r},y=a(139),j=a(92),S=a(140),O=a.n(S);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:e,link:t,data:a,imgUrl:n,process:r,timestamp:(new Date).getTime()}}function N(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=a,n.readAsDataURL(e)}))}function R(e){return A.apply(this,arguments)}function A(){return(A=Object(E.a)(v.a.mark((function e(t){var a,n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0},e.next=4,Object(y.a)(t,a);case 4:return n=e.sent,(r=new Image).src=URL.createObjectURL(n),e.next=9,O.a.read(r.src);case 9:return e.sent.threshold({max:150}),e.next=13,N(n);case 13:return o=e.sent,e.abrupt("return",C(t.name,"",o,r));case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function U(e){return W.apply(this,arguments)}function W(){return(W=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new j.BrowserQRCodeReader,e.prev=1,e.next=4,a.decodeFromImageUrl(t.imgUrl.src);case 4:return e.next=6,e.sent.text;case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:return e.abrupt("return","N\xe3o detectado");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var P=function(e){var t=e.setReportStatus,a=e.data,o=Object(n.useContext)(g),c=o.setData,s=o.setProgress,i=o.setStatus;Object(n.useEffect)((function(){if(0!==a.length){console.log("aaaaa");var e=a.filter((function(e){return e.process})),t=a.filter((function(e){return!e.process}));i({current:"finish",message:"Finalizado - Total:".concat(a.length," - Detectadas: ").concat(e.length," - N\xe3o-detectadas: ").concat(t.length)})}}),[a,i]);var l=function(){var e=Object(E.a)(v.a.mark((function e(a){var n,r,o,l,u,d,f,m,p,g,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.target.files).length>0&&n.length<=2e3)){e.next=50;break}r=[],o=x(Array.from(n)),l=0,u=Object(w.a)(o),e.prev=6,u.s();case 8:if((d=u.n()).done){e.next=38;break}f=d.value,m=Object(w.a)(f),e.prev=11,m.s();case 13:if((p=m.n()).done){e.next=28;break}return g=p.value,e.next=17,R(g);case 17:return h=e.sent,e.next=20,U(h);case 20:h.link=e.sent,"N\xe3o detectado"!==h.link&&(h.process=!0),r.push(h),l++,s(l/n.length*100),i({current:"processing",message:"Processando imagem e detectando qr code (".concat(l,"/").concat(n.length,")")});case 26:e.next=13;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(11),m.e(e.t0);case 33:return e.prev=33,m.f(),e.finish(33);case 36:e.next=8;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(6),u.e(e.t1);case 43:return e.prev=43,u.f(),e.finish(43);case 46:c((function(e){return[].concat(Object(b.a)(e),r)})),t(!1),e.next=51;break;case 50:n.length>=1500?i({current:"maxPhoto",message:"Erro - ultrapassou m\xe1ximo de fotos"}):i("Erro - nenhuma foto informada");case 51:case"end":return e.stop()}}),e,null,[[6,40,43,46],[11,30,33,36]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(k.a,{variant:"contained",color:"primary",component:"label"},"Buscar imagens",r.a.createElement("input",{id:"file-input",type:"file",hidden:!0,multiple:!0,onChange:function(e){return l(e)}}))},D=a(141),L=a.n(D),B=a(142);function F(e,t,a){var n,r=new L.a,o=Object(w.a)(t);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(c.process===a){var s=c.data,i=s.indexOf(",");-1!==i&&(s=s.substring(i+1,s.length)),r.file(c.name,s,{base64:!0})}}}catch(l){o.e(l)}finally{o.f()}r.generateAsync({type:"blob"}).then((function(t){console.log(t);var a=new Date,n=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),o=a.getFullYear(),c=String(a.getHours()),s=String(a.getMinutes()),i=String(a.getSeconds());a=n+"-"+r+"-"+o+"-"+c+":"+s+":"+i,Object(B.saveAs)(t,"".concat(e,"-").concat(a,".zip"))}))}var I=function(e){var t=e.data,a=e.reportStatus,n=function(){var e=Object(E.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.length>0?F("fotos-detectadas",t,!0):console.log("data vazio")}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:a,onClick:function(e){return n(e)}},"Fotos detectadas")},z=function(e){var t=e.data,a=e.reportStatus,n=function(){var e=Object(E.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.length>0?F("fotos-nao-detectadas",t,!1):console.log("data vazio")}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:a,onClick:function(e){return n(e)}},"Fotos n\xe3o detectadas")},M=a(143);function T(e){var t,a=[],n=Object(w.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.process&&a.push({link:r.link,nome:r.name,data:r.timestamp})}}catch(o){n.e(o)}finally{n.f()}return a}function q(e){return H.apply(this,arguments)}function H(){return(H=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(M.json2csv)(t,(function(e,t){console.log(t);var a=document.createElement("a");a.setAttribute("href","data:text/csv;charset=UTF-8,"+encodeURIComponent(t));var n=new Date,r=String(n.getDate()).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),c=n.getFullYear(),s=String(n.getHours()),i=String(n.getMinutes()),l=String(n.getSeconds());n=r+"-"+o+"-"+c+"-"+s+":"+i+":"+l,a.setAttribute("download","relatorio-".concat(n,".csv")),document.body.appendChild(a),a.click()}))}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){var t=e.data,a=e.reportStatus,n=function(){var e=Object(E.a)(v.a.mark((function e(a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.length>0?q(T(t)):console.log("data vazio")}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(k.a,{variant:"contained",color:"primary",disabled:a,onClick:function(e){return n(e)}},"Baixar relat\xf3rio")},J=Object(p.a)({root:{height:"20%"}});function Y(e){return r.a.createElement(m.a,{item:!0,xs:3,container:!0,justify:"center",alignItems:"center"},e)}var X=function(e){var t=e.data,a=J(),o=Object(n.useState)(!0),c=Object(s.a)(o,2),i=c[0],l=c[1];return r.a.createElement(m.a,{container:!0,className:a.root},Y(r.a.createElement(P,{data:t,setReportStatus:l})),Y(r.a.createElement(I,{data:t,reportStatus:i})),Y(r.a.createElement(z,{data:t,reportStatus:i})),Y(r.a.createElement(Q,{data:t,reportStatus:i})))},$=a(303),G=Object(p.a)((function(e){return{root:{width:"100%",height:"8%",marginLeft:e.spacing(2),marginBottom:e.spacing(2)},text:{width:"35rem"}}}));var K=function(e){var t=e.progress,a=e.status,n=G();return r.a.createElement(m.a,{className:n.root,container:!0,justify:"center",alignItems:"center",xs:6},r.a.createElement(m.a,{item:!0,xs:10},r.a.createElement(d.a,{className:n.text},function(e){return e.message}(a))),r.a.createElement(m.a,{item:!0,xs:10},r.a.createElement($.a,{variant:"determinate",value:t})))},V=a(295),Z=a(299),_=a(298),ee=a(294),te=a(296),ae=a(297),ne=a(268),re=Object(p.a)({paper:{width:"90%",height:"55vh"},table:{width:"100%",overflowX:"hidden",tableLayout:"fixed"},tableCell:{wordBreak:"break-all"}}),oe=function(e){var t=e.data,a=re();return r.a.createElement(m.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(ee.a,{component:ne.a,className:a.paper,elevation:3},r.a.createElement(V.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(_.a,{className:a.tableCell},"Id"),r.a.createElement(_.a,{className:a.tableCell},"Nome do Arquivo"),r.a.createElement(_.a,{align:"center"},"Link encontrado"),r.a.createElement(_.a,{align:"center"},"Processado"))),r.a.createElement(Z.a,null,t.map((function(e,t){return r.a.createElement(ae.a,{key:e.name},r.a.createElement(_.a,{component:"th",scope:"row",className:a.tableCell},t+1),r.a.createElement(_.a,{component:"th",scope:"row",className:a.tableCell},e.name),r.a.createElement(_.a,{align:"center",className:a.tableCell},e.link),r.a.createElement(_.a,{align:"center",className:a.tableCell},e.process?"detectado":"n\xe3o detectado"))}))))))};var ce=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(n.useState)({current:"init",message:"Progresso da detec\xe7\xe3o do QR code"}),p=Object(s.a)(m,2),h=p[0],v=p[1];return r.a.createElement(i.a,{width:"100vw",height:"100vh",style:{backgroundColor:"#EEEEEE"}},r.a.createElement(g.Provider,{value:{data:a,setData:o,setProgress:d,setStatus:v}},r.a.createElement(f,null),r.a.createElement(X,{data:a}),r.a.createElement(K,{progress:u,status:h}),r.a.createElement(oe,{data:a})))},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");se?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ie(t,e)}))}}()}},[[151,1,2]]]);
//# sourceMappingURL=main.6b1e85bc.chunk.js.map