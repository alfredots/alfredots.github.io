(this["webpackJsonpqr-code-reader"]=this["webpackJsonpqr-code-reader"]||[]).push([[0],{176:function(e,t,n){e.exports=n(285)},181:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=(n(181),n(78)),i=n(14),l=n(26),u=Object(a.createContext)({token:null,setToken:function(){}}),d=n(84),m=n.n(d),f={};try{if(!window.localStorage)throw Error("no local storage");f.set=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},f.get=function(e){var t=localStorage.getItem(e);try{return JSON.parse(t)}catch(n){return null}},f.remove=function(e){return localStorage.removeItem(e)}}catch(Pe){f.set=m.a.set,f.get=m.a.getJSON,f.remove=m.a.remove}var p=f;var g=function(e){var t=e.children,n=function(e){var t=Object(a.useState)((function(){return p.get(e)})),n=Object(l.a)(t,2),r=n[0],o=n[1];return[r,Object(a.useCallback)((function(t){p.set(e,t),o(t)}),[e]),Object(a.useCallback)((function(){p.remove(e),o(void 0)}),[e])]}("token"),o=Object(l.a)(n,2),c=o[0],s=o[1];return r.a.createElement(u.Provider,{value:{token:c,setToken:s}},t)},v=n(166),h=function(e){var t=e.component,n=Object(v.a)(e,["component"]),o=Object(a.useContext)(u).token;return r.a.createElement(i.b,Object.assign({},n,{render:function(){return o?r.a.createElement(t,n):r.a.createElement(i.a,{to:"/login"})}}))},b=n(337),E=n(322),w=n(325),y=n(326),j=function(){return r.a.createElement(E.a,{position:"static"},r.a.createElement(w.a,null,r.a.createElement(y.a,{variant:"h6"},"Leitor de QR Codes")))},x=n(328),k=n(327),O=Object(a.createContext)(),S=n(10),C=n.n(S),N=n(165),I=n(53),R=n(24),D=n(338),U=function(e){var t,n,a,r=[];for(t=0,n=e.length;t<n;t+=10)a=e.slice(t,t+10),r.push(a);return r},A=n(160),P=n(108),W=n(109),B=n.n(W),L=n(161),T=n.n(L);function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:e,link:t,data:n,imgUrl:a,process:r,timestamp:(new Date).getTime()}}function z(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=n,a.readAsDataURL(e)}))}function M(e){return new Promise((function(t,n){var a=document.getElementById("myCanvas").getContext("2d");a.filter="contrast(130%) grayscale(100%)",a.imageSmoothingEnabled=!0,e.onload=function(){a.drawImage(e,0,0);var n=a.getImageData(0,0,576,1024);t(n)},e.onerror=n}))}function q(e){return J.apply(this,arguments)}function J(){return(J=Object(R.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0},e.next=3,Object(A.a)(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=new Image;return t.src=URL.createObjectURL(e),t}function Q(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(R.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T()(t,{adjustment:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){var t=document.createElement("img");return t.setAttribute("src",B.a.convertImageDataToCanvasURL(e)),t}function G(e){return X.apply(this,arguments)}function X(){return(X=Object(R.a)(C.a.mark((function e(t){var n,a,r,o,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t);case 3:return n=e.sent,a=H(n),e.next=7,z(n);case 7:return r=e.sent,e.next=10,M(a);case 10:return o=e.sent,e.next=13,Q(o,2);case 13:return c=e.sent,s=_(c),document.getElementById("myCanvas2"),e.abrupt("return",F(t.name,"",r,s));case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function $(e){return K.apply(this,arguments)}function K(){return(K=Object(R.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new P.BrowserQRCodeReader(3e3),e.prev=1,e.next=4,n.decodeFromImageUrl(t.imgUrl.src);case 4:return e.next=6,e.sent.text;case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:return e.abrupt("return","N\xe3o detectado");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var V=function(e){var t=e.setReportStatus,n=e.data,o=Object(a.useContext)(O),c=o.setData,s=o.setProgress,i=o.setStatus;Object(a.useEffect)((function(){if(0!==n.length){console.log("aaaaa");var e=n.filter((function(e){return e.process})),t=n.filter((function(e){return!e.process}));i({current:"finish",message:"Finalizado - Total:".concat(n.length," - Detectadas: ").concat(e.length," - N\xe3o-detectadas: ").concat(t.length)})}}),[n,i]);var l=function(){var e=Object(R.a)(C.a.mark((function e(n){var a,r,o,l,u,d,m,f,p,g,v;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=n.target.files).length>0&&a.length<=2e3)){e.next=50;break}r=[],o=U(Array.from(a)),l=0,u=Object(I.a)(o),e.prev=6,u.s();case 8:if((d=u.n()).done){e.next=38;break}m=d.value,f=Object(I.a)(m),e.prev=11,f.s();case 13:if((p=f.n()).done){e.next=28;break}return g=p.value,e.next=17,G(g);case 17:return v=e.sent,e.next=20,$(v);case 20:v.link=e.sent,"N\xe3o detectado"!==v.link&&(v.process=!0),r.push(v),l++,s(l/a.length*100),i({current:"processing",message:"Processando imagem e detectando qr code (".concat(l,"/").concat(a.length,")")});case 26:e.next=13;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(11),f.e(e.t0);case 33:return e.prev=33,f.f(),e.finish(33);case 36:e.next=8;break;case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(6),u.e(e.t1);case 43:return e.prev=43,u.f(),e.finish(43);case 46:c((function(e){return[].concat(Object(N.a)(e),r)})),t(!1),e.next=51;break;case 50:a.length>=1500?i({current:"maxPhoto",message:"Erro - ultrapassou m\xe1ximo de fotos"}):i("Erro - nenhuma foto informada");case 51:case"end":return e.stop()}}),e,null,[[6,40,43,46],[11,30,33,36]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{variant:"contained",color:"primary",component:"label"},"Buscar imagens",r.a.createElement("input",{id:"file-input",type:"file",hidden:!0,multiple:!0,onChange:function(e){return l(e)}}))},Z=n(162),ee=n.n(Z),te=n(163);function ne(e,t,n){var a,r=new ee.a,o=Object(I.a)(t);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(c.process===n){var s=c.data,i=s.indexOf(",");-1!==i&&(s=s.substring(i+1,s.length)),r.file(c.name,s,{base64:!0})}}}catch(l){o.e(l)}finally{o.f()}r.generateAsync({type:"blob"}).then((function(t){console.log(t);var n=new Date,a=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0"),o=n.getFullYear(),c=String(n.getHours()),s=String(n.getMinutes()),i=String(n.getSeconds());n=a+"-"+r+"-"+o+"-"+c+":"+s+":"+i,Object(te.saveAs)(t,"".concat(e,"-").concat(n,".zip"))}))}var ae=function(e){var t=e.data,n=e.reportStatus,a=function(){var e=Object(R.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.length>0?ne("fotos-detectadas",t,!0):console.log("data vazio")}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{variant:"contained",color:"primary",disabled:n,onClick:function(e){return a(e)}},"Fotos detectadas")},re=function(e){var t=e.data,n=e.reportStatus,a=function(){var e=Object(R.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.length>0?ne("fotos-nao-detectadas",t,!1):console.log("data vazio")}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{variant:"contained",color:"primary",disabled:n,onClick:function(e){return a(e)}},"Fotos n\xe3o detectadas")},oe=n(164);function ce(e){var t,n=[],a=Object(I.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.process&&n.push({link:r.link,nome:r.name,data:r.timestamp})}}catch(o){a.e(o)}finally{a.f()}return n}function se(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(oe.json2csv)(t,(function(e,t){console.log(t);var n=document.createElement("a");n.setAttribute("href","data:text/csv;charset=UTF-8,"+encodeURIComponent(t));var a=new Date,r=String(a.getDate()).padStart(2,"0"),o=String(a.getMonth()+1).padStart(2,"0"),c=a.getFullYear(),s=String(a.getHours()),i=String(a.getMinutes()),l=String(a.getSeconds());a=r+"-"+o+"-"+c+"-"+s+":"+i+":"+l,n.setAttribute("download","relatorio-".concat(a,".csv")),document.body.appendChild(n),n.click()}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){var t=e.data,n=e.reportStatus,a=function(){var e=Object(R.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.length>0?se(ce(t)):console.log("data vazio")}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D.a,{variant:"contained",color:"primary",disabled:n,onClick:function(e){return a(e)}},"Baixar relat\xf3rio")},ue=Object(k.a)({root:{height:"20%"}});function de(e){return r.a.createElement(x.a,{item:!0,xs:3,container:!0,justify:"center",alignItems:"center"},e)}var me=function(e){var t=e.data,n=ue(),o=Object(a.useState)(!0),c=Object(l.a)(o,2),s=c[0],i=c[1];return r.a.createElement(x.a,{container:!0,className:n.root},de(r.a.createElement(V,{data:t,setReportStatus:i})),de(r.a.createElement(ae,{data:t,reportStatus:s})),de(r.a.createElement(re,{data:t,reportStatus:s})),de(r.a.createElement(le,{data:t,reportStatus:s})))},fe=n(329),pe=Object(k.a)((function(e){return{root:{width:"100%",height:"8%",marginLeft:e.spacing(2),marginBottom:e.spacing(2)},text:{width:"35rem"}}}));var ge=function(e){var t=e.progress,n=e.status,a=pe();return r.a.createElement(x.a,{className:a.root,container:!0,justify:"center",alignItems:"center",xs:6},r.a.createElement(x.a,{item:!0,xs:10},r.a.createElement(y.a,{className:a.text},function(e){return e.message}(n))),r.a.createElement(x.a,{item:!0,xs:10},r.a.createElement(fe.a,{variant:"determinate",value:t})))},ve=n(331),he=n(335),be=n(334),Ee=n(330),we=n(332),ye=n(333),je=n(286),xe=Object(k.a)({paper:{width:"90%",height:"55vh"},table:{width:"100%",overflowX:"hidden",tableLayout:"fixed"},tableCell:{wordBreak:"break-all"}}),ke=function(e){var t=e.data,n=xe();return r.a.createElement(x.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(Ee.a,{component:je.a,className:n.paper,elevation:3},r.a.createElement(ve.a,{className:n.table,"aria-label":"simple table"},r.a.createElement(we.a,null,r.a.createElement(ye.a,null,r.a.createElement(be.a,{className:n.tableCell},"Id"),r.a.createElement(be.a,{className:n.tableCell},"Nome do Arquivo"),r.a.createElement(be.a,{align:"center"},"Link encontrado"),r.a.createElement(be.a,{align:"center"},"Processado"))),r.a.createElement(he.a,null,t.map((function(e,t){return r.a.createElement(ye.a,{key:e.name},r.a.createElement(be.a,{component:"th",scope:"row",className:n.tableCell},t+1),r.a.createElement(be.a,{component:"th",scope:"row",className:n.tableCell},e.name),r.a.createElement(be.a,{align:"center",className:n.tableCell},e.link),r.a.createElement(be.a,{align:"center",className:n.tableCell},e.process?"detectado":"n\xe3o detectado"))}))))))};var Oe=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(1),s=Object(l.a)(c,2),i=s[0],u=s[1],d=Object(a.useState)({current:"init",message:"Progresso da detec\xe7\xe3o do QR code"}),m=Object(l.a)(d,2),f=m[0],p=m[1];return r.a.createElement(b.a,{width:"100vw",height:"100vh",style:{backgroundColor:"#EEEEEE"}},r.a.createElement(O.Provider,{value:{data:n,setData:o,setProgress:u,setStatus:p}},r.a.createElement(j,null),r.a.createElement(me,{data:n}),r.a.createElement(ge,{progress:i,status:f}),r.a.createElement(ke,{data:n}),r.a.createElement("canvas",{id:"myCanvas",width:"576",height:"1024",style:{display:"none"}}),r.a.createElement("div",{id:"myCanvas2",width:"576",height:"1024"})))},Se=n(83),Ce=n(112),Ne=n(336);function Ie(){return{user:"",password:""}}var Re=function(){var e=Object(a.useState)(Ie),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),s=Object(l.a)(c,2),d=s[0],m=s[1],f=Object(a.useContext)(u).setToken,p=Object(i.g)();function g(e){console.log("ta changeando");var t=e.target,a=t.value,r=t.name;o(Object(Ce.a)(Object(Ce.a)({},n),{},Object(Se.a)({},r,a))),console.log(n)}return r.a.createElement(b.a,{width:"100vw",height:"100vh",style:{backgroundColor:"#EEEEEE"},display:"flex",flexDirection:"column"},r.a.createElement(j,null),r.a.createElement(b.a,{width:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(b.a,{component:je.a,elevation:3,width:"400px",height:"300px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"},r.a.createElement(Ne.a,{label:"Usu\xe1rio",variant:"outlined",type:"text",name:"user",onChange:g,value:n.user}),r.a.createElement(Ne.a,{label:"Senha",variant:"outlined",name:"password",type:"password",onChange:g,value:n.password}),d&&r.a.createElement("div",{className:"user-login__error"},d),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(e){console.log("ta submitando"),e.preventDefault();var t=function(e){var t=e.user,n=e.password;return"admin"===t&&"qr2020@!"===n?{token:"1234"}:{error:"Usu\xe1rio ou senha inv\xe1lido"}}(n),a=t.token,r=t.error;if(a)return f(a),p.push("/");m(r),o(Ie)}},"Entrar"))))},De=function(){return r.a.createElement(s.a,null,r.a.createElement(g,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:Re}),r.a.createElement(h,{path:"/",component:Oe}))))},Ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");Ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ae(t,e)}))}}()}},[[176,1,2]]]);
//# sourceMappingURL=main.159c00d8.chunk.js.map